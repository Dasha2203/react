{"ast":null,"code":"const API_KEY = 'c065f555d4e19864fdc27e420f758663';\nconst URL_API = 'https://api.openweathermap.org/data/2.5/';\nexport function getWeather(type, searchParams) {\n  const url = new URL(`${URL_API}/${type}`);\n  const params = new URLSearchParams({\n    ...searchParams,\n    appid: API_KEY\n  });\n  url.search = params.toString();\n  return fetch(url).then(res => res.json());\n}\nfunction formatForecastWeather(data) {\n  console.log('data ', data);\n  let {\n    lat,\n    lon,\n    current: {\n      temp,\n      dt,\n      feels_like,\n      weather\n    },\n    daily,\n    hourly,\n    // main: { temp, feels_like, temp_min, temp_max, humidity },\n    name,\n    // sys: { country, sunrise, sunset },\n    // wind: { speed },\n    timezone,\n    timezone_offset\n  } = data;\n  daily = daily.slice(1, 7).map(d => {\n    return {\n      date: getTime(timeToLocal(d.dt, timezone_offset)),\n      temp: d.temp.day,\n      icon: d.weather[0].icon\n    };\n  });\n  hourly = hourly.slice(0, 47).map(h => {\n    return {\n      date: getTime(timeToLocal(h.dt, timezone_offset)),\n      temp: h.temp,\n      icon: h.weather[0].icon\n    };\n  });\n  console.log('daily', daily);\n  const {\n    main: details,\n    icon,\n    description\n  } = weather[0];\n  return {\n    current: {\n      lat,\n      lon,\n      temp,\n      feels_like,\n      city: timezone.split('/')[1],\n      dt,\n      // country,\n      // sunrise,\n      // sunset,\n      details,\n      icon,\n      description,\n      date: getTime(timeToLocal(dt, timezone_offset))\n    },\n    daily,\n    hourly\n  };\n}\nfunction formatCurrentWeather(data) {\n  const {\n    coord: {\n      lat,\n      lon\n    },\n    main: {\n      temp,\n      feels_like,\n      temp_min,\n      temp_max,\n      humidity\n    },\n    name,\n    dt,\n    sys: {\n      country,\n      sunrise,\n      sunset\n    },\n    weather,\n    wind: {\n      speed\n    }\n  } = data;\n  const {\n    main: details,\n    icon\n  } = weather[0];\n  return {\n    lat,\n    lon,\n    temp,\n    humidity,\n    name,\n    dt,\n    country,\n    sunrise,\n    sunset,\n    details,\n    icon\n  };\n}\nexport async function getDataCurrentWeather(searchParams) {\n  const formattedCurrentWeather = await getWeather('weather', searchParams).then(formatCurrentWeather);\n  const {\n    lat,\n    lon\n  } = formattedCurrentWeather;\n  let forecastWeather = getFormattedDataWeather({\n    lat,\n    lon\n  });\n  return forecastWeather;\n}\nexport async function getFormattedDataWeather(searchParams) {\n  const formattedForecastWeather = await getWeather('onecall', searchParams).then(formatForecastWeather);\n  return formattedForecastWeather;\n}\nexport function timeToLocal(sec, timezone) {\n  return new Date(sec * 1000 + timezone * 1000).toUTCString();\n}\nfunction getTime(date) {\n  const localeDate = new Date(date);\n  const dayLong = localeDate.toLocaleDateString(\"en-GB\", {\n    weekday: 'long'\n  });\n  const dayShort = localeDate.toLocaleDateString(\"en-GB\", {\n    weekday: 'short'\n  });\n  const time = localeDate.toLocaleTimeString('en-GB').split(':').splice(0, 2).join(':');\n  return {\n    dayLong,\n    dayShort,\n    time,\n    date: localeDate.toLocaleDateString(\"en-GB\")\n  };\n}","map":{"version":3,"names":["API_KEY","URL_API","getWeather","type","searchParams","url","URL","params","URLSearchParams","appid","search","toString","fetch","then","res","json","formatForecastWeather","data","console","log","lat","lon","current","temp","dt","feels_like","weather","daily","hourly","name","timezone","timezone_offset","slice","map","d","date","getTime","timeToLocal","day","icon","h","main","details","description","city","split","formatCurrentWeather","coord","temp_min","temp_max","humidity","sys","country","sunrise","sunset","wind","speed","getDataCurrentWeather","formattedCurrentWeather","forecastWeather","getFormattedDataWeather","formattedForecastWeather","sec","Date","toUTCString","localeDate","dayLong","toLocaleDateString","weekday","dayShort","time","toLocaleTimeString","splice","join"],"sources":["/Users/darakorbut/Downloads/projects/weatherapp/src/weather.js"],"sourcesContent":["const API_KEY = 'c065f555d4e19864fdc27e420f758663';\nconst URL_API = 'https://api.openweathermap.org/data/2.5/';\n\nexport function getWeather(type, searchParams) {\n    const url = new URL(`${URL_API}/${type}`);\n    const params = new URLSearchParams({ ...searchParams, appid: API_KEY });\n    url.search = params.toString();\n\n\n\n    return fetch(url).then((res) => res.json());\n}\n\nfunction formatForecastWeather(data) {\n\n    console.log('data ', data)\n    let {\n        lat,\n        lon,\n        current: {temp, dt, feels_like, weather},\n        daily,\n        hourly,\n        // main: { temp, feels_like, temp_min, temp_max, humidity },\n        name,\n        // sys: { country, sunrise, sunset },\n        // wind: { speed },\n        timezone,\n        timezone_offset\n    } = data;\n\n    daily = daily.slice(1, 7).map((d) => {\n        return {\n            date: getTime(timeToLocal(d.dt, timezone_offset)),\n            temp: d.temp.day,\n            icon: d.weather[0].icon,\n        };\n    });\n\n    hourly = hourly.slice(0, 47).map((h) => {\n        return {\n            date: getTime(timeToLocal(h.dt, timezone_offset)),\n            temp: h.temp,\n            icon: h.weather[0].icon,\n        };\n    });\n\n    console.log('daily', daily)\n    const { main: details, icon, description } = weather[0];\n\n    return ({\n        current: {\n            lat,\n            lon,\n            temp,\n            feels_like,\n            city: timezone.split('/')[1],\n            dt,\n            // country,\n            // sunrise,\n            // sunset,\n            details,\n            icon,\n            description,\n            date: getTime(timeToLocal(dt, timezone_offset))\n        },\n        daily,\n        hourly\n\n    });\n}\n\nfunction formatCurrentWeather(data) {\n    const {\n        coord: { lat, lon },\n        main: { temp, feels_like, temp_min, temp_max, humidity },\n        name,\n        dt,\n        sys: { country, sunrise, sunset },\n        weather,\n        wind: { speed },\n    } = data;\n\n    const { main: details, icon } = weather[0];\n\n    return {\n        lat,\n        lon,\n        temp,\n        humidity,\n        name,\n        dt,\n        country,\n        sunrise,\n        sunset,\n        details,\n        icon\n    };\n}\n\nexport async function getDataCurrentWeather(searchParams) {\n    const formattedCurrentWeather = await getWeather(\n        'weather',\n        searchParams\n    ).then(formatCurrentWeather);\n\n    const {lat, lon} = formattedCurrentWeather;\n\n    let forecastWeather = getFormattedDataWeather({lat, lon});\n\n    return forecastWeather;\n}\nexport async function getFormattedDataWeather(searchParams) {\n\n    const formattedForecastWeather = await getWeather(\n        'onecall',\n        searchParams\n    ).then(formatForecastWeather);\n\n    return formattedForecastWeather\n}\n\nexport function timeToLocal(sec, timezone) {\n    return (new Date(sec*1000+(timezone*1000)).toUTCString())\n}\n\nfunction getTime(date) {\n    const localeDate = new Date(date);\n    const  dayLong = localeDate.toLocaleDateString(\"en-GB\", {\n        weekday: 'long'\n    })\n\n    const  dayShort = localeDate.toLocaleDateString(\"en-GB\", {\n        weekday: 'short'\n    })\n\n    const time = localeDate.toLocaleTimeString('en-GB').split(':').splice(0, 2).join(':');\n\n    return ({\n        dayLong,\n        dayShort,\n        time,\n        date: localeDate.toLocaleDateString(\"en-GB\")\n    })\n\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}